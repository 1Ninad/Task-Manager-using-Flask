{% extends "base.html" %}

{% block content %}
<div class="container">
    <form method="GET">
        <input type="text" name="search" placeholder="Search tasks..." value="{{ search_query }}">
        <button type="submit">Search</button>
        <a href="{{ url_for('undo') }}" class="action-button">Undo</a>
        
    </form>

    <form method="POST">
        {{ form.hidden_tag() }}
        <div>
            {{ form.title.label }} 
            {{ form.title(size=30) }}<br>
            {{ form.description.label }} 
            {{ form.description(cols=30, rows=5) }}<br>
            {{ form.priority.label }} 
            {{ form.priority(size=3) }}<br>
            {{ form.submit() }}
        </div>
    </form>

    <ul>
        {% if tasks %}
            {% for task in tasks %}
            <li>
                <strong>{{ task.title }}</strong> - {{ task.description }} - <em>Priority: {{ task.priority }}</em>
                <a href="{{ url_for('delete', task_id=task.id) }}">Delete</a>
                <a href="{{ url_for('update', task_id=task.id) }}">Update</a>
            </li>
            {% endfor %}
        {% else %}
            <li>No tasks available.</li>
        {% endif %}
    </ul>
</div>
{% endblock %}
